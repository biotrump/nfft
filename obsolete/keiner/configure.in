# Process this file with autoconf to produce a configure script.
AC_INIT(NFSFT, 0.6.0, keiner@math.uni-luebeck.de)

AC_CONFIG_SRCDIR(kernel/nfsft.h)
AM_CONFIG_HEADER(kernel/config.h)

AM_INIT_AUTOMAKE
AM_ENABLE_SHARED(no)
AC_CANONICAL_HOST

SHARED_VERSION_INFO="0.6.0"
AC_SUBST(SHARED_VERSION_INFO)
AC_SUBST(VERSION)
ISODATE=`date +%Y-%m-%d`
AC_SUBST(ISODATE)

# Checks for programs.
AC_PROG_INSTALL
AC_PROG_CC
AM_PROG_LIBTOOL

# Checks for libraries.
AC_CHECK_LIB(fftw3,fftw_execute,,,)

# Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(complex.h time.h stdbool.h string.h fftw3.h)

# Checks for typedefs, structures, and compiler characteristics.
AC_ZERO_BYTES_DOUBLE

# Checks for library functions.

# Additional options
AC_ARG_WITH(
  bwexp, 
  AC_HELP_STRING(
    [--with-bwexp=VALUE],
    [Maximum allowable bandwidth exponent (default is 10)]),
  [AC_DEFINE_UNQUOTED(BWEXP_MAX, $withval, "User defined exponent of maximum bandwidth")
   AC_DEFINE_UNQUOTED(BW_MAX, $((2**$withval)), "User defined maximum bandwidth")],
	 [AC_DEFINE(BWEXP_MAX, 10, "Default exponent of maximum bandwidth")
   AC_DEFINE(BW_MAX, 1024, "Default maximum bandwidth")])

AC_CONFIG_FILES([
  Makefile 
  nfft/Makefile 
  kernel/Makefile 
  examples/Makefile 
  examples/convolution/Makefile 
  examples/egm96/Makefile 
  examples/healpix/Makefile 
  examples/template/Makefile 
  examples/wrapper/Makefile 
  tests/Makefile 
  tests/accuracy/Makefile 
  tests/flft/Makefile 
  tests/inverse/Makefile 
  tests/performance/Makefile 
  tests/stabilization/Makefile 
  tests/summation/Makefile
])

AC_OUTPUT
